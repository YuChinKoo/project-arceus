import { Users } from '../db/dbConnector.js';

export const resolvers = {
    Query: {
        findAUser: (root, {id}) => {
            return new Promise((resolve, reject) => {
                Users.findOne({_id: id}, (err, user) => {
                    if (err) reject(err);
                    else resolve(user);
                })
            })
        }
    },
    Mutation: {
        createUser: (root, {input}) => {
            const newUser = new Users({
                firstName: input.firstName,
                lastName: input.lastName
            });
            newUser.id = newUser._id;
            return new Promise((resolve, reject) => {
                newUser.save((err) => {
                    if (err) reject(err);
                    else resolve(newUser);
                })
            })
        }
    }
}